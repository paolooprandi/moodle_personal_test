{"version":3,"sources":["../src/pagination.js"],"names":["define","$","Templates","Pagination","perPage","totalItems","root","currentPage","prototype","getRoot","getContainer","find","init","on","e","target","newPage","data","setCurrentPage","trigger","bind","val","getTemplateContext","pages","pageCount","getPageCount","getCurrentPage","i","push","Math","ceil","getLimitFrom","setTotalItems","render","then","html"],"mappings":"AAAAA,OAAM,yCAAC,CAAC,QAAD,CAAW,gBAAX,CAAD,CAA+B,SAASC,CAAT,CAAYC,CAAZ,CAAuB,CAExD,GAAIC,CAAAA,CAAU,CAAG,SAASC,CAAT,CAAkBC,CAAlB,CAA8BC,CAA9B,CAAoC,CACjD,KAAKF,OAAL,CAAeA,CAAf,CACA,KAAKG,WAAL,CAAmB,CAAnB,CACA,KAAKF,UAAL,CAAkBA,CAAlB,CACA,KAAKC,IAAL,CAAYA,CACf,CALD,CAOAH,CAAU,CAACK,SAAX,CAAqBC,OAArB,CAA+B,UAAW,CACtC,MAAO,MAAKH,IACf,CAFD,CAIAH,CAAU,CAACK,SAAX,CAAqBE,YAArB,CAAoC,UAAW,CAC3C,MAAO,MAAKJ,IAAL,CAAUK,IAAV,CAAe,uBAAf,CACV,CAFD,CAIAR,CAAU,CAACK,SAAX,CAAqBI,IAArB,CAA4B,UAAW,CACnC,KAAKH,OAAL,GAAeI,EAAf,CAAkB,OAAlB,CAA2B,2BAA3B,CAAwD,SAASC,CAAT,CAAY,IAC5DC,CAAAA,CAAM,CAAGd,CAAC,CAACa,CAAC,CAACC,MAAH,CADkD,CAE5DC,CAAO,CAAGD,CAAM,CAACE,IAAP,CAAY,MAAZ,CAFkD,CAGhE,KAAKC,cAAL,CAAoBF,CAApB,EACA,KAAKN,YAAL,GAAoBS,OAApB,CAA4B,uBAA5B,CAAqD,CAACH,CAAD,CAArD,CACH,CALuD,CAKtDI,IALsD,CAKjD,IALiD,CAAxD,EAOA,KAAKX,OAAL,GAAeI,EAAf,CAAkB,QAAlB,CAA4B,yBAA5B,CAAuD,SAASC,CAAT,CAAY,IAC3DC,CAAAA,CAAM,CAAGd,CAAC,CAACa,CAAC,CAACC,MAAH,CADiD,CAE3DC,CAAO,CAAGD,CAAM,CAACM,GAAP,EAFiD,CAG/D,KAAKH,cAAL,CAAoBF,CAApB,EACA,KAAKN,YAAL,GAAoBS,OAApB,CAA4B,uBAA5B,CAAqD,CAACH,CAAD,CAArD,CACH,CALsD,CAKrDI,IALqD,CAKhD,IALgD,CAAvD,CAMH,CAdD,CAgBAjB,CAAU,CAACK,SAAX,CAAqBc,kBAArB,CAA0C,UAAW,CAKjD,OAJIC,CAAAA,CAAK,CAAG,EAIZ,CAHIC,CAAS,CAAG,KAAKC,YAAL,EAGhB,CAFIlB,CAAW,CAAG,KAAKmB,cAAL,EAElB,CAASC,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGH,CAApB,CAA+BG,CAAC,EAAhC,CAAoC,CAChCJ,CAAK,CAACK,IAAN,CAAW,CACP,MAASD,CADF,CAEP,MAASA,CAAC,CAAC,CAFJ,CAGP,SAAYA,CAAC,EAAIpB,CAHV,CAAX,CAKH,CAED,MAAO,CACH,kBAA8C,CAAzB,OAAKmB,cAAL,EADlB,CAEH,cAAiB,KAAKA,cAAL,IAAyB,KAAKD,YAAL,GAAoB,CAA7C,EAAkD,CAAC,KAAKA,YAAL,EAFjE,CAGH,cAAiB,KAAKC,cAAL,GAAsB,CAHpC,CAIH,UAAa,KAAKA,cAAL,GAAsB,CAJhC,CAKH,MAASH,CALN,CAMH,WAAcC,CANX,CAOH,MAAS,KAAKnB,UAPX,CASV,CAtBD,CAwBAF,CAAU,CAACK,SAAX,CAAqBiB,YAArB,CAAoC,UAAW,CAC3C,MAAOI,CAAAA,IAAI,CAACC,IAAL,CAAU,KAAKzB,UAAL,CAAkB,KAAKD,OAAjC,CACV,CAFD,CAIAD,CAAU,CAACK,SAAX,CAAqBuB,YAArB,CAAoC,UAAW,CAC3C,MAAO,MAAKxB,WAAL,CAAmB,KAAKH,OAClC,CAFD,CAIAD,CAAU,CAACK,SAAX,CAAqBkB,cAArB,CAAsC,UAAW,CAC7C,MAAO,MAAKnB,WAEf,CAHD,CAIAJ,CAAU,CAACK,SAAX,CAAqBU,cAArB,CAAsC,SAASX,CAAT,CAAsB,CACxD,KAAKA,WAAL,CAAmBA,CAEtB,CAHD,CAIAJ,CAAU,CAACK,SAAX,CAAqBwB,aAArB,CAAqC,SAAS3B,CAAT,CAAqB,CACtD,KAAKA,UAAL,CAAkBA,CACrB,CAFD,CAIAF,CAAU,CAACK,SAAX,CAAqByB,MAArB,CAA8B,UAAW,CACrC/B,CAAS,CAAC+B,MAAV,CAAiB,uCAAjB,CAA0D,KAAKX,kBAAL,EAA1D,EACKY,IADL,CACU,SAASC,CAAT,CAAmB,CACrB,KAAKzB,YAAL,GAAoByB,IAApB,CAAyBA,CAAzB,CACH,CAFK,CAEJf,IAFI,CAEC,IAFD,CADV,CAIH,CALD,CAOA,MAAOjB,CAAAA,CACV,CArFK,CAAN","sourcesContent":["define(['jquery', 'core/templates'], function($, Templates) {\n\n    var Pagination = function(perPage, totalItems, root) {\n        this.perPage = perPage;\n        this.currentPage = 0;\n        this.totalItems = totalItems;\n        this.root = root;\n    };\n\n    Pagination.prototype.getRoot = function() {\n        return this.root;\n    };\n\n    Pagination.prototype.getContainer = function() {\n        return this.root.find('.pagination-container');\n    };\n\n    Pagination.prototype.init = function() {\n        this.getRoot().on('click', '[data-action=change-page]', function(e) {\n            var target = $(e.target);\n            var newPage = target.data('page');\n            this.setCurrentPage(newPage);\n            this.getContainer().trigger('pagination.changePage', [newPage]);\n        }.bind(this));\n\n        this.getRoot().on('change', '[data-action=jump-page]', function(e) {\n            var target = $(e.target);\n            var newPage = target.val();\n            this.setCurrentPage(newPage);\n            this.getContainer().trigger('pagination.changePage', [newPage]);\n        }.bind(this));\n    };\n\n    Pagination.prototype.getTemplateContext = function() {\n        var pages = [];\n        var pageCount = this.getPageCount();\n        var currentPage = this.getCurrentPage();\n\n        for (var i = 0; i < pageCount; i++) {\n            pages.push({\n                'index': i,\n                'label': i+1,\n                'selected': i == currentPage\n            });\n        }\n\n        return {\n            'previous_disabled': this.getCurrentPage() == 0,\n            'next_disabled': this.getCurrentPage() == this.getPageCount()-1 || !this.getPageCount(),\n            'previous_page': this.getCurrentPage()-1,\n            'next_page': this.getCurrentPage()+1,\n            'pages': pages,\n            'page_count': pageCount,\n            'total': this.totalItems\n        };\n    };\n\n    Pagination.prototype.getPageCount = function() {\n        return Math.ceil(this.totalItems / this.perPage);\n    };\n\n    Pagination.prototype.getLimitFrom = function() {\n        return this.currentPage * this.perPage;\n    };\n\n    Pagination.prototype.getCurrentPage = function() {\n        return this.currentPage;\n\n    };\n    Pagination.prototype.setCurrentPage = function(currentPage) {\n        this.currentPage = currentPage;\n\n    };\n    Pagination.prototype.setTotalItems = function(totalItems) {\n        this.totalItems = totalItems;\n    };\n\n    Pagination.prototype.render = function() {\n        Templates.render('videotimeplugin_repository/pagination', this.getTemplateContext())\n            .then(function(html, js) {\n                this.getContainer().html(html);\n            }.bind(this));\n    };\n\n    return Pagination;\n});\n"],"file":"pagination.min.js"}