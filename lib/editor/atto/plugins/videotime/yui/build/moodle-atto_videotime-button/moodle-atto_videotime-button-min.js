YUI.add("moodle-atto_videotime-button",function(e,t){var n="atto_videotime",r={BUTTON:"atto_videotime_embed"};e.namespace("M.atto_videotime").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{_currentSelection:null,initializer:function(){this.addButton({buttonName:"videotime_embed",callback:this._displayDialogue,icon:"icon",iconComponent:"atto_videotime",title:"pluginname"})},_displayDialogue:function(){this._currentSelection=this.get("host").getSelection();if(this._currentSelection===!1)return;var e=this.getDialogue({headerContent:M.util.get_string("pluginname",n),width:"800px",focusAfterHide:!0});e.set("bodyContent",this._getDialogueContent()),e.show()},_getDialogueContent:function(){var t=e.Handlebars.compile('<table class="table"><tbody>{{#each instances}}<tr><td>{{name}}</td><td><button class="{{../CSS.BUTTON}} btn btn-primary" data-cmid="{{cmid}}">{{{get_string "embed" ../component}}}</button></td></tr>{{/each}}</tbody></table>'),i=e.Node.create(t({component:n,CSS:r,instances:this.get("instances")}));return i.delegate("click",this._insertShortcode,"."+r.BUTTON,this),i},_insertShortcode:function(e){var t=e.target.getData("cmid");this.getDialogue({focusAfterHide:null}).hide();var n=this.get("host");n.setSelection(this._currentSelection),n.insertContentAtFocusPoint('[videotime cmid="'+t+'"]'),this.markUpdated()}},{ATTRS:{instances:{value:{}}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});
